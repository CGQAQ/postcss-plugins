"use strict";var n,t,e=require("postcss-value-parser");!function(n){n.Block="block",n.Inline="inline"}(n||(n={})),function(n){n.Start="start",n.End="end"}(t||(t={}));const o={BlockStart:`${n.Block}-${t.Start}`,BlockEnd:`${n.Block}-${t.End}`,InlineStart:`${n.Inline}-${t.Start}`,InlineEnd:`${n.Inline}-${t.End}`};var r,i;function hasKeyframesAtRuleAncestor(n){let t=n.parent;for(;t;)if("atrule"===t.type){if("keyframes"===n.parent.name.toLowerCase())return!0;t=t.parent}else t=t.parent;return!1}function cloneDeclaration(n,t,e){return n.cloneBefore({value:t,prop:e})}function transformSide(n,t){return e=>(cloneDeclaration(e,e.value,`${n}-${t}`),!0)}function transformSideShorthand(n,t){return o=>{const r=e(o.value).nodes.filter((n=>"space"!==n.type));if(r.length>2){const n=`[postcss-logical] Invalid number of values for ${o.prop}. Found ${r.length} values, expected 1 or 2.`;throw new Error(n)}const[i,a]=t;let l,c;return 1===r.length&&(l=r[0].value,c=r[0].value),2===r.length&&(l=r[0].value,c=r[1].value),cloneDeclaration(o,l,`${n}-${i}`),cloneDeclaration(o,c,`${n}-${a}`),!0}}function logicalToPhysical(n,t){const[e,r]=t.block,[i,a]=t.inline;switch(n){case o.BlockStart:return e;case o.BlockEnd:return r;case o.InlineStart:return i;case o.InlineEnd:return a}}function doTransform(n,t,o){const{prop:r,value:i}=n,a=e(i);return a.nodes.forEach((n=>{const e=n.value.toLowerCase();return"word"===n.type&&t.includes(e)&&(n.value=logicalToPhysical(e,o)),n})),a.toString()!==i&&(n.cloneBefore({prop:r,value:a.toString()}),!0)}function transformValueWithSingleDirection(t,e){return r=>{let i=[];return i=t===n.Block?[o.BlockStart,o.BlockEnd]:[o.InlineStart,o.InlineEnd],doTransform(r,i,e)}}function directionFlowToAxes(n){switch(n){case r.TopToBottom:return[i.Top,i.Bottom];case r.BottomToTop:return[i.Bottom,i.Top];case r.RightToLeft:return[i.Right,i.Left];case r.LeftToRight:return[i.Left,i.Right]}}!function(n){n.TopToBottom="top-to-bottom",n.BottomToTop="bottom-to-top",n.RightToLeft="right-to-left",n.LeftToRight="left-to-right"}(r||(r={})),function(n){n.Top="top",n.Right="right",n.Bottom="bottom",n.Left="left"}(i||(i={}));const creator=a=>{const l=Object.assign({preserve:!1,blockDirection:r.TopToBottom,inlineDirection:r.LeftToRight},a),c=Object.values(r);if(!c.includes(l.blockDirection))throw new Error(`[postcss-logical] "blockDirection" must be one of ${c.join(", ")}`);if(!c.includes(l.inlineDirection))throw new Error(`[postcss-logical] "inlineDirection" must be one of ${c.join(", ")}`);const[s,d]=directionFlowToAxes(l.blockDirection),[u,f]=directionFlowToAxes(l.inlineDirection);if(!Object.values(i).every((n=>[s,d,u,f].includes(n))))throw new Error('[postcss-logical] "blockDirection" and "inlineDirection" must be on separate axes');const g={block:[s,d],inline:[u,f],inlineIsHorizontal:[r.LeftToRight,r.RightToLeft].includes(l.inlineDirection)},makeTransform=n=>(t,{result:e})=>{if(!n||hasKeyframesAtRuleAncestor(t))return;const o=t.parent;let r=!1;try{r=n(t)}catch(n){t.warn(e,n.message)}r&&(l.preserve||t.remove(),o.nodes.length||o.remove())};return{postcssPlugin:"postcss-logical",Declaration:{"caption-side":makeTransform((m=g,n=>doTransform(n,Object.values(o),m))),float:makeTransform(g.inlineIsHorizontal?transformValueWithSingleDirection(n.Inline,g):null),clear:makeTransform(g.inlineIsHorizontal?transformValueWithSingleDirection(n.Inline,g):null),"text-align":makeTransform(g.inlineIsHorizontal?(p=g.inline,n=>{const{prop:o,value:r}=n,i=e(r),[a,l]=p;i.nodes.forEach((n=>{const e=n.value.toLowerCase();"word"===n.type&&(e===t.End&&(n.value=l),e===t.Start&&(n.value=a))}));const c=i.toString()!==r;return c&&n.cloneBefore({prop:o,value:i.toString()}),c}):null),"margin-block-start":makeTransform(transformSide("margin",s)),"margin-block-end":makeTransform(transformSide("margin",d)),"margin-inline-start":makeTransform(transformSide("margin",u)),"margin-inline-end":makeTransform(transformSide("margin",f)),"margin-block":makeTransform(transformSideShorthand("margin",[s,d])),"margin-inline":makeTransform(transformSideShorthand("margin",[u,f])),"padding-block-start":makeTransform(transformSide("padding",s)),"padding-block-end":makeTransform(transformSide("padding",d)),"padding-inline-start":makeTransform(transformSide("padding",u)),"padding-inline-end":makeTransform(transformSide("padding",f)),"padding-block":makeTransform(transformSideShorthand("padding",[s,d])),"padding-inline":makeTransform(transformSideShorthand("padding",[u,f]))}};var p,m};creator.postcss=!0,module.exports=creator;
